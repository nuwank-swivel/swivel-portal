# Story 05.02: Seat Layout Selection

- **Status**: Done
- **Epic**: Booking Experience

## Story

**As a** user,
**I want** to select my seat from a visual seat layout for each date,
**so that** I can choose my preferred seat and see which seats are already booked.

## Acceptance Criteria

1. The booking UI displays a visual seat layout for the selected date.
2. The user can select an available seat from the layout.
3. The user's selected seat is highlighted and stored in the booking.
4. Booked seats are shown as unavailable/highlighted for other users.
5. The seat selection is reflected in the user's booking details.

## Tasks / Subtasks

- [x] **Frontend:**
  - [x] Implement seat layout visualization in SeatBooking page.
  - [x] Highlight available and booked seats.
  - [x] Store and display selected seat in booking details.
- [x] **Backend:**
  - [x] Update booking API to store seat assignments.
  - [x] Provide seat layout and availability data for each date.

## Dev Notes

- **Database:** Add seat assignment fields to booking records.
- **API:** Endpoints to fetch seat layout and availability per date.
- **Relevant Files:**
  - `apps/swivel-portal/src/components/booking/BookingModal.tsx`
  - `apps/swivel-portal-api/`
  - `libs/dal/`

### Testing

- **Unit Tests:**
  - Test seat selection and highlighting logic.
- **Integration Tests:**
  - Test API for seat layout and booking with seat assignment.

## Change Log

| Date       | Version | Description   | Author         |
| ---------- | ------- | ------------- | -------------- |
| 2025-10-20 | 1.0     | Initial draft | GitHub Copilot |

## QA Results (2025-10-22)

### Requirements Traceability

- Acceptance criteria are clear and mapped to BookingPanel and backend APIs.
- Seat selection is handled by the FloorLayout component, which provides a visual seat layout and passes the selected seat to BookingPanel.

### Implementation Coverage

- FloorLayout provides seat selection UI, showing available, booked, selected, and "my booking" states.
- BookingPanel supports booking creation with selected seat, time, and lunch option.
- Backend APIs support seat layout, availability, and booking with seat assignment.

### Testability

- No automated tests found for seat selection, layout, or booking flows.
- Recommend adding unit/integration tests for seat selection and booking scenarios.

### Risk Assessment

- Functional risk: Low-Medium. Seat selection UI logic is present and integrated; ensure continued coverage as UI evolves.
- Test coverage risk: High. No automated tests for seat selection or booking flows.

### Quality Attributes

- Security: Auth middleware present for booking API.
- Performance: No obvious bottlenecks in API calls.
- Reliability: Backend validates required fields and stores seat assignment.

### Recommendations

- Add/verify tests for seat selection, highlighting, and booking flows.
- Document seat selection logic and test scenarios.

### Gate Decision

**CONCERNS**

- No automated tests for seat selection or booking flows.

### Gate Status

Gate: CONCERNS â†’ docs/qa/gates/5.2.seat-layout-selection.yml
