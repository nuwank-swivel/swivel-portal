# Story 04.02: Team Directory Feature

- **Status**: Draft
- **Epic**: Team Management

## Story

**As a** user,
**I want** to access a Team Directory from the dashboard, view all teams, and (if I am an admin) create, update, or delete teams and manage team members,
**so that** teams can be organized, managed, and referenced throughout the portal.

## Acceptance Criteria

1. Any user can access the Team Directory from the dashboard and view a list of all teams.
2. Each team displays its name, color, owner (admin who created the team), and list of members.
3. Admins can create new teams by specifying a name, selecting a color from a color picker, and choosing members from the user list.
4. Admins can update existing teams (name, color, members).
5. Admins can soft-delete teams (mark as deleted, do not remove from DB).
6. User records in the database include a list of teams they are part of.
7. Only admins can create, update, or delete teams; any user can be added as a member.
8. Deleting a team removes it from the Team Directory view and from all user records, but the team remains in the database as soft-deleted.

## Tasks / Subtasks

- [ ] **Frontend:**
  - [ ] Add a Team Directory section accessible from the dashboard.
  - [ ] Display all teams with name, color, owner, and members.
  - [ ] Implement color picker for team creation/editing.
  - [ ] Allow admins to create new teams (form for name, color, members).
  - [ ] Allow admins to edit existing teams.
  - [ ] Allow admins to soft-delete teams.
  - [ ] Update user profiles to show teams they belong to.
- [ ] **Backend:**
  - [ ] Create API endpoints for teams: list, create, update, soft-delete.
  - [ ] Ensure only admins can create, update, or delete teams.
  - [ ] Update user records to reflect team membership.
  - [ ] Implement soft-delete logic for teams.
  - [ ] Ensure team color is stored and returned in API responses.

## Dev Notes

- **Team Color:** Use a color picker component in the frontend; store color as a string (e.g., hex code) in the database.
- **Soft Delete:** Add a `deleted` flag to team records; do not physically remove teams from the database.
- **User Records:** Each user document should include a list of team IDs they are part of.
- **Relevant Files:**
  - `apps/swivel-portal/src/pages/TeamDirectory.tsx` (or similar)
  - `apps/swivel-portal-api/src/teams/`
  - `apps/swivel-portal-api/src/users/`

### Testing

- **Unit Tests:**
  - Test team creation, update, and soft-delete logic in backend.
  - Test frontend forms and color picker.
- **Integration Tests:**
  - Test API endpoints for teams and user-team relationships.
- **E2E Tests:**
  - Simulate admin creating, updating, and deleting teams; verify UI and DB changes.
  - Simulate user viewing Team Directory and their teams.

## Change Log

| Date       | Version | Description   | Author   |
| ---------- | ------- | ------------- | -------- |
| 2025-10-22 | 1.0     | Initial draft | Bob (SM) |
